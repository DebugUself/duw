# 怼周刊_v108
~ 预定 190513 2042 发布

-----------------------------------------

DUW之触发器

    上穷碧落下黄泉
    千里寻他deploy
    原来手动靠自建
    发布完成手删除

>> 熊本

-----------------------------------------

- 主编: [大妈](http://du.zoomquiet.io/2014-02/ac0-zq/)
- 责编:

# Activity 活性
> 社区当前嗯哼程度

## 4 weekly activity:
> total commit: **272**


### top5 git commiter
> gen. 190513 220339.283 (by st v 190401.1942)

```
Zoom.Quiet          : ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 102.00
Leon                : ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 56.00
GitHub              : ▇▇▇▇▇▇▇▇▇▇▇▇ 35.00
damao               : ▇▇▇▇▇▇▇▇▇▇ 31.00
zhangshiyinrunwithcc: ▇▇▇▇ 14.00
```


# Tasks 任务 
~ 记述关键共怼任务 (如果没有, 留空)

## propose 号召

- [|蠎周刊 |汇集全球蠎事儿 !-)](http://weekly.pychina.org/archives.html)
    + 俺私人嗯哼了5年了
    + 邀请大家一起来, 每周嗯哼
- 每周例怼后, 无论是否列席, 大家都在 `故事->怼印象` 中追加当周 top3 感触


# Progress 进展 
~ 整体圈内活跃指标情况([st](https://github.com/DebugUself/du4proto/tree/DU_tools/st) 专用服务, 尚少使用手册)

## duw_pub
> @izhangshiying DU108w发布

- 0. :question: 站点等待自动化更新 https://du.101.camp/duw/2019/
- 1. :white_check_mark: Github release https://github.com/DebugUself/du4proto/releases/tag/19.05.13
- 2. :white_check_mark: ggroup
- 3. :white_check_mark: Slack #general
- 4. :white_check_mark: 发布记录登记 https://github.com/DebugUself/du4proto/wiki/DUWeeklyEditor
    + 部署deploy文档
    + 测试触发是否成功

参考: [3w\[MVP\] pubDUW 实用化 · Issue #652 · DebugUself/du4proto](https://github.com/DebugUself/du4proto/issues/652)

- 开始一切人工, 大家都感觉麻烦
- 现在决心完全自动化:
    + 要先解决自动化发布
    + 才可能自动化将统计结果汇入
- 已经在 aliyun VPS 中部署好自动化发布环境
- 但是:
    + 还没通过 github-web-hook 来触发
    + 当前触发是通过定期检验指定仓库中指定文件来触发
        * [du4proto/_trigger at DUW · DebugUself/du4proto](https://github.com/DebugUself/du4proto/tree/DUW/_trigger) 目录中
        * 是否有 delpoy.md 文件?
- 是否自动化发布成功?
    + [duw/2019 at logging · DebugUself/duw](https://github.com/DebugUself/duw/tree/logging/2019) -> 看对应部署日志
    + 或是刷 [2019 - Debug Uself Weekly](https://du.101.camp/duw/2019/) 对应目录是否有对应页面生成
    + 或是[DebugUself/duw: 怼周刊 -> 自怼圈社区电子周刊](https://github.com/DebugUself/duw) 看发布仓库是否有对应周刊目录生成
    + ...
- 当前已知问题:
    + 自动化可以触发, 但是发布不成功

进一步的:

>> 发布完成手删除

正好理解反了,
参考: [du4proto/tasks.py at duw_pub · DebugUself/du4proto](https://github.com/DebugUself/du4proto/blob/duw_pub/tasks.py#L295)

这是自动删除的


#### 案例
> 对应本地相同工具发布:

- [👌 IMPROVE: (#674) 108w auto deploy · DebugUself/du4proto@0ef5065](https://github.com/DebugUself/du4proto/commit/0ef50651e65ea1fc9af250caffde3769d1244191) 提交新内容和触发器
- 运行 [du4proto/tasks.py at duw_pub · DebugUself/du4proto](https://github.com/DebugUself/du4proto/blob/duw_pub/tasks.py)
    + `inv pub`
    + 则自动化:
        * 同步所有相关仓库/分支
        * 将对应合理文件复制到对应编译目录
        * 使用 Mkdocs 编译
        * 删除触发文件
            - [🐛 FIX: (pubDUW) recover trigger obj. wait NEXT deploy · DebugUself/du4proto@3f1385b](https://github.com/DebugUself/du4proto/commit/3f1385b8805a8283d43f7c10400798ec49053336)
        * 分别提交编译后成果
            - [👌 IMPROVE: (#674) 108w auto deploy · DebugUself/du4proto@0ef5065](https://github.com/DebugUself/du4proto/commit/0ef50651e65ea1fc9af250caffde3769d1244191)
            - [👌 IMPROVE: pub(site) gen. by MkDocs as invoke (at 190514 1658 53.290) · DebugUself/duw@2cfe4c3](https://github.com/DebugUself/duw/commit/2cfe4c335033154f196980973908486e06454455)
- 服务器端是相同代码...
    + 但是,没能自动化完成....
    + 是需要共同解决的问题

# Achievements 成果 
~ 各种成品/半成品 内部知识作品


## pubDUW 阶段故事

> 起初

    editor -> github.com/DebugUself/du4proto/DUW
        +- chrome -> print -> pdf
            +- github.com/DebugUself/du4proto/releases
            +- ggroups -> debuguself@googlegroups.com
            +- DebugUself.Slack.com -> #general 
                        |
    DUr <-- chk. & read +

> 然后

    DUr -> github.com/DebugUself/du4proto/DUW
    editor -> github.com/DebugUself/du4proto/duw_pub/tasks.py
            +- 从 DUW 复制合理文件到对应目录
            +- 用 Mkdocs 编译为网站
            +- 输出到 github.com/DebugUself/duw
                +- github-pages 自动发布
                    +-> du.101.camp/duw
                        |
    DUr <-- chk. & read +


> 现在

    DUr -> github.com/DebugUself/du4proto/DUW
    editor -> github.com/DebugUself/du4proto/DUW/_trigger
            +- 增加 deploy.md 激发文件
                        |V|
    ====================+ github-web-hook ===============
        POST -> hook.duw.zoomquiet.top
                        |V|
    ====================+ aliyun VPS auto matter ========
        [Nginx] -> hook.duw.zoomquiet.top
            +- proxy <- localhost:9080
                +- [gunicorn] <== [supervisord]
                    +- [bottle]
                        +-  du4proto/duw_pub/hooksrv.py
                            +- support hook API
                        +- grasp '_trigger/deploy.md'
                    +- touch local trigger 
                |- /opt/www/debuguself/br_duw_pub/_trigger4deploy.log
                                    ^
                            check as => */5 8-23 * * *
                                    |
        [Corntab] -> /opt/www/debuguself/br_duw_pub/cron4trig2duw.sh
                    +- if _trigger4deploy.log exist
                        +- inv pub
                            +- 从 DUW 复制合理文件到对应目录
                            +- 用 Mkdocs 编译为网站
                            +- push -> github.com/DebugUself/duw
                        |V|
    =====================================================
                +- github-pages 自动发布
                    +-> du.101.camp/duw
                        |
    DUr <-- chk. & read +

> 未来

    DUr -> github.com/DebugUself/du4proto/DUW
        +- 指定 Issue 回复
        +- 指定 ggroup 约定标题邮件
        +- 指定 Slack 频道约定前缀
        +- 指定 微信群 约定前缀
        +- ... 更多方便渠道随时发布周刊文案
    editor -> github.com/DebugUself/du4proto/DUW/_trigger
            +- 增加 deploy.md 激发文件
        +- 指定 Issue 回复
        +- 指定 ggroup 约定标题邮件
        +- 指定 Slack 频道约定前缀
        +- 指定 微信群 约定前缀
        +- ... 更多方便渠道随时发起 deploy
                        |V|
    ====================+ github-web-hook ===============
        POST -> hook.duw.zoomquiet.top
                        |V|
    ====================+ aliyun VPS auto matter ========
        [Nginx] -> hook.duw.zoomquiet.top
            +- proxy <- localhost:9080
                +- [gunicorn] <== [supervisord]
                    +- [bottle]
                        +-  du4proto/duw_pub/hooksrv.py
                            +- support hook API
                        +- grasp '_trigger/deploy.md'
                    +- touch local trigger 
                |- /opt/www/debuguself/br_duw_pub/_trigger4deploy.log
                                    ^
                            check as => */5 8-23 * * *
                                    |
        [Corntab] -> /opt/www/debuguself/br_duw_pub/cron4trig2duw.sh
                    +- if _trigger4deploy.log exist
                        +- inv pub
                            +- 从 DUW 复制合理文件到对应目录
                            +- 用 Mkdocs 编译为网站
                            +- push -> github.com/DebugUself/duw
                        |V|
    =====================================================
                        +- github-pages 自动发布
                        |   +-> du.101.camp/duw
                        +- 更多专用 bot
                        |   +-> Slack 指定频道
                        |   +-> ggroup 约定标题邮件
                        |   +-> 微信群 约定前缀信息
                        |   +-> 公众号 
                        |   +-> 小应用
                        |   +-> ...
                        |   |
    DUr <-- pull & read +++++





# Stories 故事 
~ 收集各自无法雷同的怼圈真人故事...

## impression 怼印象 
~ 例怼中感触最嗯哼的 top3 感想

- `(￣▽￣)`:
    + 文因经, 完全不同维度的精彩世界
    + JY.PA, 认真而又灵活的坚持
    + 熊本, 作品的冲动无人能比

- `熊本🐻`:
    + @是生 分享了自创宗教。创立自己的宗教，从而营造独立精神世界，并对其扩展，其立意令人佩服。再考虑其年纪仅为三十上下，更觉得可贵。
    + @dama 分享了18年来社区经历，并阐述目前对构建自学型社区愿景，很有章法。不过，比较多的体验，是尊敬老师傅的半生积累，对老师傅的愿景、形成愿景的过程，其实并无太多体会。可能由于老师傅分享内容较为宏观，没听到故事。为什么要创立自学型社区？如果有一批别致的故事，可能更能感染怼友。
    + @熊本🐻 分享了期望制作关于怼周刊如何形成的记录视频的idea。被dama补充，可以考虑多种形式，比如podcast/mblog。不过工作方式需要注意，寻求外部资源，避免由于局限在自我资源里，导致此起彼伏的断篇。还分享了，熊本专属作品走向，文学评论集合，见 [清州九年](https://github.com/DebugUself/du4proto/blob/zsy/Lit9/README.md)
    
## live 怼生活
~ 生活中带有怼范的各种 (投稿后可同时沉淀到 wiki 的2.5 怼生活下)



# Recommedations 推荐 
~ 嗯哼各种怼路上发现的嗯哼...

- 是也乎:
    + [Issue 367 -蠎周刊 -汇集全球蠎事儿 ;-)](http://weekly.pychina.org/issue/issue-367.html)


# Postscript 后记 
~ 怼周刊是什么以及为什么和能怎么...

大妈曰过: `参差多态 才是生机`
问题在 `参差` 的行为是无法形成团队的

    Coming together is a beginning; 
    Keeping together is progress; 
    Working together is success!

<--- [Henry Ford](https://www.brainyquote.com/quotes/quotes/h/henryford121997.html)

- 所以, 有了 大妈 随见随怼的持续嗯哼...
- 但是, 想象一年后, 回想几十周前自己作的那些 `图样图森破` 
- 却没现成的资料来出示给后进来嗯哼?
- 不科学, 值得记录的, 就应当有个形式固定下来
- 所以,有了这个 `怼周刊` (Weekly 4 DU)

What is DUW?
Why we make DUW?
What are the possibilities of DUW?

Dama said, variety brings vitality.
But various behaviors may make us hard to cooperate as a team.

    Coming together is a beginning; 
    Keeping together is progress; 
    Working together is success!

<--- [Henry Ford](https://www.brainyquote.com/quotes/quotes/h/henryford121997.html)

That's why Dama keeps on debugging.
However, as time goes by, maybe you would not remember these days clearly and spread your experience difficultly.
What a pity!
The valuable should have a fixed form to be recorded.
That's why we make the Weekly for DU.

